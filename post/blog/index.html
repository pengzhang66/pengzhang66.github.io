<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>结构体 | 彭硕的博客</title>
<meta name="keywords" content="">
<meta name="description" content="一、结构体 1.1 什么是结构体 Go 语言中数组可以存储同一类型的数据，但在结构体中我们可以为不同项定义不同的数据类型。 结构体是由一系列具有相同类型或不同类型的数据构成的数据集合。
1.2 结构体的定义和初始化 type struct_variable_type struct { member definition; member definition; ... member definition; } 一旦定义了结构体类型，它就能用于变量的声明
variable_name := structure_variable_type {value1, value2...valuen} 初始化结构体
// 1.按照顺序提供初始化值 P := person{&#34;Tom&#34;, 25} // 2.通过field:value的方式初始化，这样可以任意顺序 P := person{age:24, name:&#34;Tom&#34;} // 3.new方式,未设置初始值的，会赋予类型的默认初始值 p := new(person) p.age=24 1.3 结构体的访问 访问结构体成员(访问结构的各个字段)
通过点.操作符用于访问结构的各个字段。
package main import &#34;fmt&#34; type Books struct { title string author string subject string book_id int } func main() { var Book1 Books /* 声明 Book1 为 Books 类型 */ var Book2 Books /* 声明 Book2 为 Books 类型 */ /* book 1 描述 */ Book1.">
<meta name="author" content="">
<link rel="canonical" href="https://pengzhang.github.io/post/blog/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css" integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://pengzhang.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://pengzhang.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://pengzhang.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://pengzhang.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://pengzhang.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="结构体" />
<meta property="og:description" content="一、结构体 1.1 什么是结构体 Go 语言中数组可以存储同一类型的数据，但在结构体中我们可以为不同项定义不同的数据类型。 结构体是由一系列具有相同类型或不同类型的数据构成的数据集合。
1.2 结构体的定义和初始化 type struct_variable_type struct { member definition; member definition; ... member definition; } 一旦定义了结构体类型，它就能用于变量的声明
variable_name := structure_variable_type {value1, value2...valuen} 初始化结构体
// 1.按照顺序提供初始化值 P := person{&#34;Tom&#34;, 25} // 2.通过field:value的方式初始化，这样可以任意顺序 P := person{age:24, name:&#34;Tom&#34;} // 3.new方式,未设置初始值的，会赋予类型的默认初始值 p := new(person) p.age=24 1.3 结构体的访问 访问结构体成员(访问结构的各个字段)
通过点.操作符用于访问结构的各个字段。
package main import &#34;fmt&#34; type Books struct { title string author string subject string book_id int } func main() { var Book1 Books /* 声明 Book1 为 Books 类型 */ var Book2 Books /* 声明 Book2 为 Books 类型 */ /* book 1 描述 */ Book1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://pengzhang.github.io/post/blog/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-01-03T21:47:45+08:00" />
<meta property="article:modified_time" content="2023-01-03T21:47:45+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="结构体"/>
<meta name="twitter:description" content="一、结构体 1.1 什么是结构体 Go 语言中数组可以存储同一类型的数据，但在结构体中我们可以为不同项定义不同的数据类型。 结构体是由一系列具有相同类型或不同类型的数据构成的数据集合。
1.2 结构体的定义和初始化 type struct_variable_type struct { member definition; member definition; ... member definition; } 一旦定义了结构体类型，它就能用于变量的声明
variable_name := structure_variable_type {value1, value2...valuen} 初始化结构体
// 1.按照顺序提供初始化值 P := person{&#34;Tom&#34;, 25} // 2.通过field:value的方式初始化，这样可以任意顺序 P := person{age:24, name:&#34;Tom&#34;} // 3.new方式,未设置初始值的，会赋予类型的默认初始值 p := new(person) p.age=24 1.3 结构体的访问 访问结构体成员(访问结构的各个字段)
通过点.操作符用于访问结构的各个字段。
package main import &#34;fmt&#34; type Books struct { title string author string subject string book_id int } func main() { var Book1 Books /* 声明 Book1 为 Books 类型 */ var Book2 Books /* 声明 Book2 为 Books 类型 */ /* book 1 描述 */ Book1."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://pengzhang.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "结构体",
      "item": "https://pengzhang.github.io/post/blog/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "结构体",
  "name": "结构体",
  "description": "一、结构体 1.1 什么是结构体 Go 语言中数组可以存储同一类型的数据，但在结构体中我们可以为不同项定义不同的数据类型。 结构体是由一系列具有相同类型或不同类型的数据构成的数据集合。\n1.2 结构体的定义和初始化 type struct_variable_type struct { member definition; member definition; ... member definition; } 一旦定义了结构体类型，它就能用于变量的声明\nvariable_name := structure_variable_type {value1, value2...valuen} 初始化结构体\n// 1.按照顺序提供初始化值 P := person{\u0026#34;Tom\u0026#34;, 25} // 2.通过field:value的方式初始化，这样可以任意顺序 P := person{age:24, name:\u0026#34;Tom\u0026#34;} // 3.new方式,未设置初始值的，会赋予类型的默认初始值 p := new(person) p.age=24 1.3 结构体的访问 访问结构体成员(访问结构的各个字段)\n通过点.操作符用于访问结构的各个字段。\npackage main import \u0026#34;fmt\u0026#34; type Books struct { title string author string subject string book_id int } func main() { var Book1 Books /* 声明 Book1 为 Books 类型 */ var Book2 Books /* 声明 Book2 为 Books 类型 */ /* book 1 描述 */ Book1.",
  "keywords": [
    
  ],
  "articleBody": "一、结构体 1.1 什么是结构体 Go 语言中数组可以存储同一类型的数据，但在结构体中我们可以为不同项定义不同的数据类型。 结构体是由一系列具有相同类型或不同类型的数据构成的数据集合。\n1.2 结构体的定义和初始化 type struct_variable_type struct { member definition; member definition; ... member definition; } 一旦定义了结构体类型，它就能用于变量的声明\nvariable_name := structure_variable_type {value1, value2...valuen} 初始化结构体\n// 1.按照顺序提供初始化值 P := person{\"Tom\", 25} // 2.通过field:value的方式初始化，这样可以任意顺序 P := person{age:24, name:\"Tom\"} // 3.new方式,未设置初始值的，会赋予类型的默认初始值 p := new(person) p.age=24 1.3 结构体的访问 访问结构体成员(访问结构的各个字段)\n通过点.操作符用于访问结构的各个字段。\npackage main import \"fmt\" type Books struct { title string author string subject string book_id int } func main() { var Book1 Books /* 声明 Book1 为 Books 类型 */ var Book2 Books /* 声明 Book2 为 Books 类型 */ /* book 1 描述 */ Book1.title = \"Go 语言\" Book1.author = \"peng\" Book1.subject = \"Go 语言教程\" Book1.book_id = 6495407 /* book 2 描述 */ Book2.title = \"Python 教程\" Book2.author = \"peng\" Book2.subject = \"Python 语言教程\" Book2.book_id = 6495700 /* 打印 Book1 信息 */ fmt.Printf( \"Book 1 title : %s\\n\", Book1.title) fmt.Printf( \"Book 1 author : %s\\n\", Book1.author) fmt.Printf( \"Book 1 subject : %s\\n\", Book1.subject) fmt.Printf( \"Book 1 book_id : %d\\n\", Book1.book_id) /* 打印 Book2 信息 */ fmt.Printf( \"Book 2 title : %s\\n\", Book2.title) fmt.Printf( \"Book 2 author : %s\\n\", Book2.author) fmt.Printf( \"Book 2 subject : %s\\n\", Book2.subject) fmt.Printf( \"Book 2 book_id : %d\\n\", Book2.book_id) } 运行结果：\nBook 1 title : Go 语言 Book 1 author : peng Book 1 subject : Go 语言教程 Book 1 book_id : 6495407 Book 2 title : Python 教程 Book 2 author : peng Book 2 subject : Python 语言教程 Book 2 book_id : 6495700 1.4 结构体指针 指针指向一个结构体 也可以创建指向结构的指针。\n结构体指针\nvar struct_pointer *Books 以上定义的指针变量可以存储结构体变量的地址。查看结构体变量地址，可以将 \u0026 符号放置于结构体变量前\nstruct_pointer = \u0026Book1; 使用结构体指针访问结构体成员，使用 “.” 操作符\nstruct_pointer.title; package main import \"fmt\" type Books struct { title string author string subject string book_id int } func main() { var Book1 Books /* Declare Book1 of type Book */ var Book2 Books /* Declare Book2 of type Book */ /* book 1 描述 */ Book1.title = \"Go 语言\" Book1.author = \"peng\" Book1.subject = \"Go 语言教程\" Book1.book_id = 6495407 /* book 2 描述 */ Book2.title = \"Python 教程\" Book2.author = \"peng\" Book2.subject = \"Python 语言教程\" Book2.book_id = 6495700 /* 打印 Book1 信息 */ printBook(\u0026Book1) /* 打印 Book2 信息 */ printBook(\u0026Book2) } func printBook( book *Books ) { fmt.Printf( \"Book title : %s\\n\", book.title); fmt.Printf( \"Book author : %s\\n\", book.author); fmt.Printf( \"Book subject : %s\\n\", book.subject); fmt.Printf( \"Book book_id : %d\\n\", book.book_id); } 结构体实例化也可以是这样的\npackage main import \"fmt\" type Books struct { } func (s Books) String() string { return \"data\" } func main() { fmt.Printf(\"%v\\n\", Books{}) } 1.5 结构体的匿名字段 结构体的匿名字段\n可以用字段来创建结构，这些字段只包含一个没有字段名的类型。这些字段被称为匿名字段。\n在类型中，使用不写字段名的方式，使用另一个类型\ntype Human struct { name string age int weight int } type Student struct { Human // 匿名字段，那么默认Student就包含了Human的所有字段 speciality string } func main() { // 我们初始化一个学生 mark := Student{Human{\"Mark\", 25, 120}, \"Computer Science\"} // 我们访问相应的字段 fmt.Println(\"His name is \", mark.name) fmt.Println(\"His age is \", mark.age) fmt.Println(\"His weight is \", mark.weight) fmt.Println(\"His speciality is \", mark.speciality) // 修改对应的备注信息 mark.speciality = \"AI\" fmt.Println(\"Mark changed his speciality\") fmt.Println(\"His speciality is \", mark.speciality) // 修改他的年龄信息 fmt.Println(\"Mark become old\") mark.age = 46 fmt.Println(\"His age is\", mark.age) // 修改他的体重信息 fmt.Println(\"Mark is not an athlet anymore\") mark.weight += 60 fmt.Println(\"His weight is\", mark.weight) } 可以使用\".“的方式进行调用匿名字段中的属性值\n实际就是字段的继承\n其中可以将匿名字段理解为字段名和字段类型都是同一个\n基于上面的理解，所以可以mark.Human = Human{\"Marcus\", 55, 220} 和mark.Human.age -= 1\n若存在匿名字段中的字段与非匿名字段名字相同，则最外层的优先访问，就近原则\n通过匿名访问和修改字段相当的有用，但是不仅仅是struct字段哦，所有的内置类型和自定义类型都是可以作为匿名字段的。\n1.6 结构体嵌套 嵌套的结构体 一个结构体可能包含一个字段，而这个字段反过来就是一个结构体。这些结构被称为嵌套结构。\n示例代码：\npackage main import ( \"fmt\" ) type Address struct { city, state string } type Person struct { name string age int address Address } func main() { var p Person p.name = \"Naveen\" p.age = 50 p.address = Address { city: \"Chicago\", state: \"Illinois\", } fmt.Println(\"Name:\", p.name) fmt.Println(\"Age:\",p.age) fmt.Println(\"City:\",p.address.city) fmt.Println(\"State:\",p.address.state) } 1.7 提升字段 在结构体中属于匿名结构体的字段称为提升字段，因为它们可以被访问，就好像它们属于拥有匿名结构字段的结构一样。理解这个定义是相当复杂的。\n示例代码：\npackage main import ( \"fmt\" ) type Address struct { city, state string } type Person struct { name string age int Address } func main() { var p Person p.name = \"Naveen\" p.age = 50 p.Address = Address{ city: \"Chicago\", state: \"Illinois\", } fmt.Println(\"Name:\", p.name) fmt.Println(\"Age:\", p.age) fmt.Println(\"City:\", p.city) //city is promoted field fmt.Println(\"State:\", p.state) //state is promoted field } 运行结果\nName: Naveen Age: 50 City: Chicago State: Illinois 1.8 导出结构体和字段 如果结构体类型以大写字母开头，那么它是一个导出类型，可以从其他包访问它。类似地，如果结构体的字段以大写开头，则可以从其他包访问它们。\n示例代码：\n1.在computer目录下，创建文件spec.go\npackage computer type Spec struct { //exported struct Maker string //exported field model string //unexported field Price int //exported field } 2.创建main.go 文件\npackage main import \"structs/computer\" import \"fmt\" func main() { var spec computer.Spec spec.Maker = \"apple\" spec.Price = 50000 fmt.Println(\"Spec:\", spec) } 目录结构如下：\nsrc\nstructs computer spec.go main.go\n1.9 结构体比较 结构体是值类型，如果每个字段具有可比性，则是可比较的。如果它们对应的字段相等，则认为两个结构体变量是相等的。\n示例代码：\npackage main import ( \"fmt\" ) type name struct { firstName string lastName string } func main() { name1 := name{\"Steve\", \"Jobs\"} name2 := name{\"Steve\", \"Jobs\"} if name1 == name2 { fmt.Println(\"name1 and name2 are equal\") } else { fmt.Println(\"name1 and name2 are not equal\") } name3 := name{firstName:\"Steve\", lastName:\"Jobs\"} name4 := name{} name4.firstName = \"Steve\" if name3 == name4 { fmt.Println(\"name3 and name4 are equal\") } else { fmt.Println(\"name3 and name4 are not equal\") } } 运行结果\nname1 and name2 are equal name3 and name4 are not equal 如果结构变量包含的字段是不可比较的，那么结构变量是不可比较的\n示例代码：\npackage main import ( \"fmt\" ) type image struct { data map[int]int } func main() { image1 := image{data: map[int]int{ 0: 155, }} image2 := image{data: map[int]int{ 0: 155, }} if image1 == image2 { fmt.Println(\"image1 and image2 are equal\") } } 2.0 结构体作为函数的参数 结构体作为函数参数使用\nackage main import \"fmt\" type Books struct { title string author string subject string book_id int } func main() { var Book1 Books /* 声明 Book1 为 Books 类型 */ var Book2 Books /* 声明 Book2 为 Books 类型 */ /* book 1 描述 */ Book1.title = \"Go 语言\" Book1.author = \"peng\" Book1.subject = \"Go 语言教程\" Book1.book_id = 6495407 /* book 2 描述 */ Book2.title = \"Python 教程\" Book2.author = \"peng\" Book2.subject = \"Python 语言教程\" Book2.book_id = 6495700 /* 打印 Book1 信息 */ printBook(Book1) /* 打印 Book2 信息 */ printBook(Book2) } func printBook( book Books ) { fmt.Printf( \"Book title : %s\\n\", book.title); fmt.Printf( \"Book author : %s\\n\", book.author); fmt.Printf( \"Book subject : %s\\n\", book.subject); fmt.Printf( \"Book book_id : %d\\n\", book.book_id); } make、new操作\nmake用于内建类型（map、slice 和channel）的内存分配。new用于各种类型的内存分配 内建函数new本质上说跟其它语言中的同名函数功能一样：new(T)分配了零值填充的T类型的内存空间，并且返回其地址，即一个*T类型的值。用Go的术语说，它返回了一个指针，指向新分配的类型T的零值。有一点非常重要：new返回指针\n内建函数make(T, args)与new(T)有着不同的功能，make只能创建slice、map和channel，并且返回一个有初始值(非零)的T类型，而不是*T。本质来讲，导致这三个类型有所不同的原因是指向数据结构的引用在使用前必须被初始化。例如，一个slice，是一个包含指向数据（内部array）的指针、长度和容量的三项描述符；在这些项目被初始化之前，slice为nil。对于slice、map和channel来说，make初始化了内部的数据结构，填充适当的值。\nmake返回初始化后的（非零）值。\n",
  "wordCount" : "974",
  "inLanguage": "en",
  "datePublished": "2023-01-03T21:47:45+08:00",
  "dateModified": "2023-01-03T21:47:45+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://pengzhang.github.io/post/blog/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "彭硕的博客",
    "logo": {
      "@type": "ImageObject",
      "url": "https://pengzhang.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://pengzhang.github.io/" accesskey="h" title="彭硕的博客 (Alt + H)">彭硕的博客</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      结构体
    </h1>
    <div class="post-meta"><span title='2023-01-03 21:47:45 +0800 CST'>January 3, 2023</span>

</div>
  </header> 
  <div class="post-content"><h1 id="一结构体">一、结构体<a hidden class="anchor" aria-hidden="true" href="#一结构体">#</a></h1>
<h2 id="11-什么是结构体">1.1 什么是结构体<a hidden class="anchor" aria-hidden="true" href="#11-什么是结构体">#</a></h2>
<p>Go 语言中数组可以存储同一类型的数据，但在结构体中我们可以为不同项定义不同的数据类型。
结构体是由一系列具有相同类型或不同类型的数据构成的数据集合。</p>
<h2 id="12-结构体的定义和初始化">1.2 结构体的定义和初始化<a hidden class="anchor" aria-hidden="true" href="#12-结构体的定义和初始化">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">struct_variable_type</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">member</span> <span style="color:#a6e22e">definition</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">member</span> <span style="color:#a6e22e">definition</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">member</span> <span style="color:#a6e22e">definition</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>一旦定义了结构体类型，它就能用于变量的声明</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">variable_name</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">structure_variable_type</span> {<span style="color:#a6e22e">value1</span>, <span style="color:#a6e22e">value2</span><span style="color:#f92672">...</span><span style="color:#a6e22e">valuen</span>}
</span></span></code></pre></div><p><strong>初始化结构体</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// 1.按照顺序提供初始化值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">P</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">person</span>{<span style="color:#e6db74">&#34;Tom&#34;</span>, <span style="color:#ae81ff">25</span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2.通过field:value的方式初始化，这样可以任意顺序
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">P</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">person</span>{<span style="color:#a6e22e">age</span>:<span style="color:#ae81ff">24</span>, <span style="color:#a6e22e">name</span>:<span style="color:#e6db74">&#34;Tom&#34;</span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 3.new方式,未设置初始值的，会赋予类型的默认初始值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">p</span> <span style="color:#f92672">:=</span> new(<span style="color:#a6e22e">person</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">age</span>=<span style="color:#ae81ff">24</span>
</span></span></code></pre></div><h2 id="13-结构体的访问">1.3 结构体的访问<a hidden class="anchor" aria-hidden="true" href="#13-结构体的访问">#</a></h2>
<p>访问结构体成员(访问结构的各个字段)</p>
<p>通过点.操作符用于访问结构的各个字段。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Books</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">title</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">author</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">subject</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">book_id</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Book1</span> <span style="color:#a6e22e">Books</span>        <span style="color:#75715e">/* 声明 Book1 为 Books 类型 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Book2</span> <span style="color:#a6e22e">Books</span>        <span style="color:#75715e">/* 声明 Book2 为 Books 类型 */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* book 1 描述 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#34;Go 语言&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">author</span> = <span style="color:#e6db74">&#34;peng&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">subject</span> = <span style="color:#e6db74">&#34;Go 语言教程&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">book_id</span> = <span style="color:#ae81ff">6495407</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* book 2 描述 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#34;Python 教程&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">author</span> = <span style="color:#e6db74">&#34;peng&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">subject</span> = <span style="color:#e6db74">&#34;Python 语言教程&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">book_id</span> = <span style="color:#ae81ff">6495700</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* 打印 Book1 信息 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book 1 title : %s\n&#34;</span>, <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">title</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book 1 author : %s\n&#34;</span>, <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">author</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book 1 subject : %s\n&#34;</span>, <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">subject</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book 1 book_id : %d\n&#34;</span>, <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">book_id</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* 打印 Book2 信息 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book 2 title : %s\n&#34;</span>, <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">title</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book 2 author : %s\n&#34;</span>, <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">author</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book 2 subject : %s\n&#34;</span>, <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">subject</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book 2 book_id : %d\n&#34;</span>, <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">book_id</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>运行结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">Book</span> <span style="color:#ae81ff">1</span> <span style="color:#a6e22e">title</span> : <span style="color:#a6e22e">Go</span> <span style="color:#960050;background-color:#1e0010">语言</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Book</span> <span style="color:#ae81ff">1</span> <span style="color:#a6e22e">author</span> : <span style="color:#a6e22e">peng</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Book</span> <span style="color:#ae81ff">1</span> <span style="color:#a6e22e">subject</span> : <span style="color:#a6e22e">Go</span> <span style="color:#960050;background-color:#1e0010">语言教程</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Book</span> <span style="color:#ae81ff">1</span> <span style="color:#a6e22e">book_id</span> : <span style="color:#ae81ff">6495407</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Book</span> <span style="color:#ae81ff">2</span> <span style="color:#a6e22e">title</span> : <span style="color:#a6e22e">Python</span> <span style="color:#960050;background-color:#1e0010">教程</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Book</span> <span style="color:#ae81ff">2</span> <span style="color:#a6e22e">author</span> : <span style="color:#a6e22e">peng</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Book</span> <span style="color:#ae81ff">2</span> <span style="color:#a6e22e">subject</span> : <span style="color:#a6e22e">Python</span> <span style="color:#960050;background-color:#1e0010">语言教程</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Book</span> <span style="color:#ae81ff">2</span> <span style="color:#a6e22e">book_id</span> : <span style="color:#ae81ff">6495700</span>
</span></span></code></pre></div><h2 id="14-结构体指针">1.4 结构体指针<a hidden class="anchor" aria-hidden="true" href="#14-结构体指针">#</a></h2>
<p>指针指向一个结构体
也可以创建指向结构的指针。</p>
<p><strong>结构体指针</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">struct_pointer</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Books</span>
</span></span></code></pre></div><p>以上定义的指针变量可以存储结构体变量的地址。查看结构体变量地址，可以将 &amp; 符号放置于结构体变量前</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">struct_pointer</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Book1</span>;
</span></span></code></pre></div><p>使用结构体指针访问结构体成员，使用 &ldquo;.&rdquo; 操作符</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">struct_pointer</span>.<span style="color:#a6e22e">title</span>;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Books</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">title</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">author</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">subject</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">book_id</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Book1</span> <span style="color:#a6e22e">Books</span>        <span style="color:#75715e">/* Declare Book1 of type Book */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Book2</span> <span style="color:#a6e22e">Books</span>        <span style="color:#75715e">/* Declare Book2 of type Book */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* book 1 描述 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#34;Go 语言&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">author</span> = <span style="color:#e6db74">&#34;peng&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">subject</span> = <span style="color:#e6db74">&#34;Go 语言教程&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">book_id</span> = <span style="color:#ae81ff">6495407</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* book 2 描述 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#34;Python 教程&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">author</span> = <span style="color:#e6db74">&#34;peng&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">subject</span> = <span style="color:#e6db74">&#34;Python 语言教程&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">book_id</span> = <span style="color:#ae81ff">6495700</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* 打印 Book1 信息 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">printBook</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Book1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* 打印 Book2 信息 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">printBook</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Book2</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printBook</span>( <span style="color:#a6e22e">book</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Books</span> ) {
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book title : %s\n&#34;</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">title</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book author : %s\n&#34;</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">author</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book subject : %s\n&#34;</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">subject</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book book_id : %d\n&#34;</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">book_id</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>结构体实例化也可以是这样的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Books</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Books</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;data&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%v\n&#34;</span>, <span style="color:#a6e22e">Books</span>{})
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="15-结构体的匿名字段">1.5 结构体的匿名字段<a hidden class="anchor" aria-hidden="true" href="#15-结构体的匿名字段">#</a></h2>
<p><strong>结构体的匿名字段</strong></p>
<p>可以用字段来创建结构，这些字段只包含一个没有字段名的类型。这些字段被称为匿名字段。</p>
<p>在类型中，使用不写字段名的方式，使用另一个类型</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Human</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">weight</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>} 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Student</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Human</span> <span style="color:#75715e">// 匿名字段，那么默认Student就包含了Human的所有字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">speciality</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>} 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 我们初始化一个学生
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">mark</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Student</span>{<span style="color:#a6e22e">Human</span>{<span style="color:#e6db74">&#34;Mark&#34;</span>, <span style="color:#ae81ff">25</span>, <span style="color:#ae81ff">120</span>}, <span style="color:#e6db74">&#34;Computer Science&#34;</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 我们访问相应的字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His name is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">name</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His age is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">age</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His weight is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">weight</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His speciality is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">speciality</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 修改对应的备注信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">speciality</span> = <span style="color:#e6db74">&#34;AI&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Mark changed his speciality&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His speciality is &#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">speciality</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 修改他的年龄信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Mark become old&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">age</span> = <span style="color:#ae81ff">46</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His age is&#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">age</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 修改他的体重信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Mark is not an athlet anymore&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">weight</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">60</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;His weight is&#34;</span>, <span style="color:#a6e22e">mark</span>.<span style="color:#a6e22e">weight</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>可以使用&quot;.&ldquo;的方式进行调用匿名字段中的属性值</p>
<p>实际就是字段的继承</p>
<p>其中可以将匿名字段理解为字段名和字段类型都是同一个</p>
<p>基于上面的理解，所以可以<code>mark.Human = Human{&quot;Marcus&quot;, 55, 220} </code>和<code>mark.Human.age -= 1</code></p>
<p>若存在匿名字段中的字段与非匿名字段名字相同，则最外层的优先访问，就近原则</p>
</blockquote>
<p>通过匿名访问和修改字段相当的有用，但是不仅仅是struct字段哦，所有的内置类型和自定义类型都是可以作为匿名字段的。</p>
<h2 id="16-结构体嵌套">1.6 结构体嵌套<a hidden class="anchor" aria-hidden="true" href="#16-结构体嵌套">#</a></h2>
<p>嵌套的结构体
一个结构体可能包含一个字段，而这个字段反过来就是一个结构体。这些结构被称为嵌套结构。</p>
<p>示例代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (  
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Address</span> <span style="color:#66d9ef">struct</span> {  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">city</span>, <span style="color:#a6e22e">state</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Person</span> <span style="color:#66d9ef">struct</span> {  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">address</span> <span style="color:#a6e22e">Address</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;Naveen&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">age</span> = <span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">address</span> = <span style="color:#a6e22e">Address</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">city</span>: <span style="color:#e6db74">&#34;Chicago&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">state</span>: <span style="color:#e6db74">&#34;Illinois&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Name:&#34;</span>, <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">name</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Age:&#34;</span>,<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">age</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;City:&#34;</span>,<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">address</span>.<span style="color:#a6e22e">city</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;State:&#34;</span>,<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">address</span>.<span style="color:#a6e22e">state</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="17-提升字段">1.7 提升字段<a hidden class="anchor" aria-hidden="true" href="#17-提升字段">#</a></h2>
<p>在结构体中属于匿名结构体的字段称为提升字段，因为它们可以被访问，就好像它们属于拥有匿名结构字段的结构一样。理解这个定义是相当复杂的。</p>
<p>示例代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (  
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Address</span> <span style="color:#66d9ef">struct</span> {  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">city</span>, <span style="color:#a6e22e">state</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Person</span> <span style="color:#66d9ef">struct</span> {  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span>  <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Address</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;Naveen&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">age</span> = <span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Address</span> = <span style="color:#a6e22e">Address</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">city</span>:  <span style="color:#e6db74">&#34;Chicago&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">state</span>: <span style="color:#e6db74">&#34;Illinois&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Name:&#34;</span>, <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">name</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Age:&#34;</span>, <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">age</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;City:&#34;</span>, <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">city</span>) <span style="color:#75715e">//city is promoted field
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;State:&#34;</span>, <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">state</span>) <span style="color:#75715e">//state is promoted field
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>运行结果</p>
<pre tabindex="0"><code>Name: Naveen  
Age: 50  
City: Chicago  
State: Illinois
</code></pre><h2 id="18-导出结构体和字段">1.8 导出结构体和字段<a hidden class="anchor" aria-hidden="true" href="#18-导出结构体和字段">#</a></h2>
<p>如果结构体类型以大写字母开头，那么它是一个导出类型，可以从其他包访问它。类似地，如果结构体的字段以大写开头，则可以从其他包访问它们。</p>
<p>示例代码：</p>
<p>1.在computer目录下，创建文件spec.go</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">computer</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Spec</span> <span style="color:#66d9ef">struct</span> { <span style="color:#75715e">//exported struct  
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Maker</span> <span style="color:#66d9ef">string</span> <span style="color:#75715e">//exported field
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">model</span> <span style="color:#66d9ef">string</span> <span style="color:#75715e">//unexported field
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Price</span> <span style="color:#66d9ef">int</span> <span style="color:#75715e">//exported field
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>2.创建main.go 文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;structs/computer&#34;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">spec</span> <span style="color:#a6e22e">computer</span>.<span style="color:#a6e22e">Spec</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">spec</span>.<span style="color:#a6e22e">Maker</span> = <span style="color:#e6db74">&#34;apple&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">spec</span>.<span style="color:#a6e22e">Price</span> = <span style="color:#ae81ff">50000</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Spec:&#34;</span>, <span style="color:#a6e22e">spec</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>目录结构如下：</p>
<p>src<br>
structs
computer
spec.go
main.go</p>
</blockquote>
<h2 id="19-结构体比较">1.9 结构体比较<a hidden class="anchor" aria-hidden="true" href="#19-结构体比较">#</a></h2>
<p>结构体是值类型，如果每个字段具有可比性，则是可比较的。如果它们对应的字段相等，则认为两个结构体变量是相等的。</p>
<p>示例代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (  
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">struct</span> {  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">firstName</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">lastName</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">name</span>{<span style="color:#e6db74">&#34;Steve&#34;</span>, <span style="color:#e6db74">&#34;Jobs&#34;</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">name</span>{<span style="color:#e6db74">&#34;Steve&#34;</span>, <span style="color:#e6db74">&#34;Jobs&#34;</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">name1</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">name2</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;name1 and name2 are equal&#34;</span>)
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;name1 and name2 are not equal&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name3</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">name</span>{<span style="color:#a6e22e">firstName</span>:<span style="color:#e6db74">&#34;Steve&#34;</span>, <span style="color:#a6e22e">lastName</span>:<span style="color:#e6db74">&#34;Jobs&#34;</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name4</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">name</span>{}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name4</span>.<span style="color:#a6e22e">firstName</span> = <span style="color:#e6db74">&#34;Steve&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">name3</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">name4</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;name3 and name4 are equal&#34;</span>)
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;name3 and name4 are not equal&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>运行结果</p>
<pre tabindex="0"><code>name1 and name2 are equal  
name3 and name4 are not equal  
</code></pre><p><strong>如果结构变量包含的字段是不可比较的，那么结构变量是不可比较的</strong></p>
<p>示例代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (  
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">image</span> <span style="color:#66d9ef">struct</span> {  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">data</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">int</span>]<span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {  
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">image1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">image</span>{<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">int</span>]<span style="color:#66d9ef">int</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">0</span>: <span style="color:#ae81ff">155</span>,
</span></span><span style="display:flex;"><span>    }}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">image2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">image</span>{<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">int</span>]<span style="color:#66d9ef">int</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">0</span>: <span style="color:#ae81ff">155</span>,
</span></span><span style="display:flex;"><span>    }}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">image1</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">image2</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;image1 and image2 are equal&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="20-结构体作为函数的参数">2.0 结构体作为函数的参数<a hidden class="anchor" aria-hidden="true" href="#20-结构体作为函数的参数">#</a></h2>
<p>结构体作为函数参数使用</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">ackage</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Books</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">title</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">author</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">subject</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">book_id</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Book1</span> <span style="color:#a6e22e">Books</span>        <span style="color:#75715e">/* 声明 Book1 为 Books 类型 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Book2</span> <span style="color:#a6e22e">Books</span>        <span style="color:#75715e">/* 声明 Book2 为 Books 类型 */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* book 1 描述 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#34;Go 语言&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">author</span> = <span style="color:#e6db74">&#34;peng&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">subject</span> = <span style="color:#e6db74">&#34;Go 语言教程&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book1</span>.<span style="color:#a6e22e">book_id</span> = <span style="color:#ae81ff">6495407</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* book 2 描述 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#34;Python 教程&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">author</span> = <span style="color:#e6db74">&#34;peng&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">subject</span> = <span style="color:#e6db74">&#34;Python 语言教程&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">Book2</span>.<span style="color:#a6e22e">book_id</span> = <span style="color:#ae81ff">6495700</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* 打印 Book1 信息 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">printBook</span>(<span style="color:#a6e22e">Book1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">/* 打印 Book2 信息 */</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">printBook</span>(<span style="color:#a6e22e">Book2</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printBook</span>( <span style="color:#a6e22e">book</span> <span style="color:#a6e22e">Books</span> ) {
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book title : %s\n&#34;</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">title</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book author : %s\n&#34;</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">author</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book subject : %s\n&#34;</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">subject</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>( <span style="color:#e6db74">&#34;Book book_id : %d\n&#34;</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">book_id</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>make、new操作</strong></p>
<p>make用于内建类型（map、slice 和channel）的内存分配。new用于各种类型的内存分配
内建函数new本质上说跟其它语言中的同名函数功能一样：new(T)分配了零值填充的T类型的内存空间，并且返回其地址，即一个*T类型的值。用Go的术语说，它返回了一个指针，指向新分配的类型T的零值。有一点非常重要：new返回指针</p>
<p>内建函数make(T, args)与new(T)有着不同的功能，make只能创建slice、map和channel，并且返回一个有初始值(非零)的T类型，而不是*T。本质来讲，导致这三个类型有所不同的原因是指向数据结构的引用在使用前必须被初始化。例如，一个slice，是一个包含指向数据（内部array）的指针、长度和容量的三项描述符；在这些项目被初始化之前，slice为nil。对于slice、map和channel来说，make初始化了内部的数据结构，填充适当的值。</p>
<p>make返回初始化后的（非零）值。</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://pengzhang.github.io/">彭硕的博客</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
